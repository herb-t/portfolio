<!--
@license
Copyright (c) 2015 The Polymer Project Authors. All rights reserved.
This code may only be used under the BSD style license found at http://polymer.github.io/LICENSE.txt
The complete set of authors may be found at http://polymer.github.io/AUTHORS.txt
The complete set of contributors may be found at http://polymer.github.io/CONTRIBUTORS.txt
Code distributed by Google as part of the polymer project is also
subject to an additional IP rights grant found at http://polymer.github.io/PATENTS.txt
-->

<!-- Polymer -->
<link rel="import" href="../bower_components/polymer/polymer.html">

<!-- elements -->
<link rel="import" href="../bower_components/iron-collapse/iron-collapse.html">
<link rel="import" href="../bower_components/iron-icons/iron-icons.html">
<link rel="import" href="../bower_components/iron-icon/iron-icon.html">
<link rel="import" href="../bower_components/iron-image/iron-image.html">
<link rel="import" href="../bower_components/iron-pages/iron-pages.html">
<link rel="import" href="../bower_components/iron-ajax/iron-ajax.html">
<link rel="import" href="../bower_components/paper-icon-button/paper-icon-button.html">
<link rel="import" href="../bower_components/paper-toolbar/paper-toolbar.html">
<link rel="import" href="../bower_components/paper-tabs/paper-tabs.html">
<link rel="import" href="../bower_components/paper-drawer-panel/paper-drawer-panel.html">
<link rel="import" href="../bower_components/paper-menu/paper-menu.html">
<link rel="import" href="../bower_components/paper-item/paper-item.html">
<link rel="import" href="../bower_components/neon-animation/neon-animated-pages.html">
<link rel="import" href="../bower_components/neon-animation/neon-animatable.html">
<link rel="import" href="../bower_components/neon-animation/neon-animations.html">
<link rel="import" href="../bower_components/app-route/app-route.html">
<link rel="import" href="../bower_components/app-route/app-location.html">
<link rel="import" href="../bower_components/paper-scroll-header-panel/paper-scroll-header-panel.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout.html">
<link rel="import" href="../bower_components/iron-flex-layout/iron-flex-layout-classes.html">


<dom-module id="portfolio-main">

  <template>

    <style>

      .content {
        height: 100%;
      }

      neon-animated-pages {
        height: 100%;
      }

      neon-animatable {
        height: 100%
      }

    </style>

    <app-location route="{{route}}" use-hash-as-path></app-location>
    <app-route route="{{route}}" pattern="/:page" data="{{pageData}}" tail="{{pageTail}}"></app-route>

    <style is="custom-style" include="iron-flex iron-flex-alignment iron-flex-reverse iron-flex-factors iron-positioning">

      :host {
        @apply(--layout-flex);
        @apply(--layout-vertical);
        font-family: 'Open Sans', sans-serif;
      }

      #main-nav .title {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        color: #444444;
      }

      #logo-container {
        width: 100%;
      }

      #main-nav #logo-link {
        display: inline-block;
        color: #444444;
        text-decoration: none;
        height: 100%;
      }

      #logo-link .title {
        display: inline-block;
        @apply(--layout-inline);
      }

      #main-nav .title span {
        @apply(--layout-self-center);
        font-size: 16px;
        font-family: 'Open Sans', sans-serif;
      }

      #main-nav .title #logo {
        display: inline-block;
        margin-right: 5px;
        margin-top: 3px;
        width: 150px;
        /*height: 20px;*/
        height: 100%;
      }

      .logo-color-1{
        fill: #CD4829;
      }

      .logo-color-2 {
        fill: #393A39;
      }

      #main-nav paper-toolbar {
        z-index: 10;
        --paper-toolbar-height: 50px;
        --paper-toolbar-background: #ffffff;
        box-shadow: 0 2px 2px rgba(120, 120, 120, .3);
      }

      #main-nav paper-icon-button {
        display: none;
        margin-right: 0;

      }

      #main-nav paper-tabs {

        position: absolute;
        bottom: 0;
        right: 0;
        --paper-tabs-selection-bar-color: #cf482a;
      }

      #main-nav paper-tab {
        margin: 0 30px;
        text-align: center;
      }

      #main-nav paper-tab a {
        height: 30px;
        color: #969696;
        font-weight: 500;
        letter-spacing: 1px;
        text-decoration: none;
        text-transform: uppercase;
      }

      paper-item a {
        color: #969696;
        font-weight: 500;
        letter-spacing: 1px;
        text-decoration: none;
        text-transform: uppercase;
      }

      .paper-item-link {
        color: inherit;
        text-decoration: none;
        display: block;
        background: #fff;
      }

      .paper-item-link paper-item {
        background: #fff;
      }

      @media screen and (min-width: 480px) {

        #main-nav paper-toolbar {
          --paper-toolbar-height: 96px;
          --paper-toolbar-content: {
            max-width: 480px;
            margin: 0 auto;
          };
        }

        #main-nav .title #logo {
          width: 200px;
          /*height: 24px;*/
        }

        #main-nav .title span {
          font-size: 18px;
        }

      }

      @media screen and (min-width: 600px) {
        #main-nav paper-toolbar {
          --paper-toolbar-content: {
            max-width: 600px;
            margin: 0 auto;
          };
        }

        #main-nav .title #logo {
          margin-top: 0px;
          width: 300px;
        }

        #main-nav .title span {
          font-size: 24px;
        }

      }

      @media screen and (min-width: 960px) {
        #main-nav paper-toolbar {
          --paper-toolbar-content: {
            max-width: 960px;
            margin: 0 auto;
          };
        }

        #main-nav .title #logo {
          margin-right: 10px;
          /*width: 92px;
          height: 32px;*/
          width: 300px;
          height: 100%;
        }
      }

      @media screen and (min-width: 1024px) {
        #main-nav paper-toolbar {
          --paper-toolbar-content: {
            max-width: 1024px;
            margin: 0 auto;
          };
        }

      }

      @media screen and (min-width: 1280px) {
        #main-nav .title #logo {
          /*margin-left: 5%;*/
        }

        #main-nav paper-toolbar {
          --paper-toolbar-content: {
            max-width: 1120px; /* site-max-width */
            margin: 0 auto;
          };
        }


      }

      @media screen and (max-width: 800px) {

        #main-nav paper-tabs {
          display: none;
        }

        #main-nav paper-icon-button {
          display: block;
          color: #969696;
        }

        .paper-item-link {
          color: inherit;
          text-decoration: none;
          display: block;
          background: #fff;
        }

        .paper-item-link paper-item {
          background: #fff;
        }

      }
    </style>
    <paper-drawer-panel responsive-width="600px" force-narrow="true" selected="{{drawerState}}" id="drawer">

      <nav drawer>
        <paper-menu>
          <a href="#/projects" class="paper-item-link"><paper-item noink key='projects'>Projects</paper-item></a>
          <a href="#/about" class="paper-item-link"><paper-item noink key='about'>About</paper-item></a>
          <a href="#/contact" class="paper-item-link"><paper-item noink key='contact'>Contact</paper-item></a>
        </paper-menu>
      </nav>

      <paper-scroll-header-panel class="flex" fixed main id="scroll">

        <!-- Main Navigation Menu -->
        <nav id="main-nav" class="paper-header">
          <paper-toolbar>
          <div id="logo-container">
            <a href="#/projects" id="logo-link">
              <div class="title">
                <!-- svg logo -->
                <!-- <svg version="1.1" id="logo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                   viewBox="0 0 103.6 57" style="enable-background:new 0 0 103.6 57;" xml:space="preserve">
                  <g>
                    <polygon class="logo-color-1" points="1.6,24.6 1.5,31.9 48.1,56.1 48.1,48.1  "/>
                    <polygon class="logo-color-2" points="8.9,28.3 48.1,8.7 48.1,0.8 1.6,24.6  "/>
                    <polygon class="logo-color-1" points="23.9,20.7 39.3,28.1 50.2,22.2 35.2,15.1  "/>
                    <polygon class="logo-color-1" points="102,24.9 55.7,0.8 55.7,8.9 94.8,28.6   "/>
                    <polygon class="logo-color-2" points="55.7,48.3 55.7,56.1 102,32.4 102,24.9  "/>
                    <polygon class="logo-color-1" points="79.9,36.2 64.5,28.9 53.7,34.7 68.6,41.8  "/>
                  </g>
                </svg> -->

                <svg version="1.1" id="logo" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                   width="371.067px" height="47.013px" viewBox="0 0 371.067 47.013" enable-background="new 0 0 371.067 47.013"
                   xml:space="preserve">
                  <polygon fill="#CD4829" points="0.034,20.246 0,26.443 39.603,47.013 39.603,40.201 "/>
                  <polygon fill="#393A39" points="6.216,23.336 39.603,6.645 39.603,0 0.034,20.246 "/>
                  <polygon fill="#CD4829" points="19.042,16.923 32.123,23.166 41.358,18.199 28.634,12.128 "/>
                  <polygon fill="#CD4829" points="85.513,20.467 46.11,0 46.11,6.813 79.325,23.591 "/>
                  <polygon fill="#393A39" points="46.11,40.369 46.11,47.013 85.513,26.855 85.513,20.467 "/>
                  <polygon fill="#CD4829" points="66.67,30.089 53.592,23.848 44.355,28.814 57.078,34.884 "/>
                  <g>
                    <path fill="#393A39" d="M116.709,38.547V27.958h-7.185v10.589h-9.583V8.603h9.583V19.19h7.185V8.603h9.583v29.944H116.709z"/>
                    <path fill="#393A39" d="M149.288,27.239h-9.582v3.643h11.739v7.666h-21.322V8.603h21.082l-1.198,7.665h-10.3v4.026h9.582V27.239z"
                      />
                    <path fill="#393A39" d="M180.671,38.547H170.13l-3.928-8.913h-2.061v8.913h-9.582V8.603h15.092c6.867,0,10.301,3.498,10.301,10.493
                      c0,4.791-1.484,7.955-4.457,9.489L180.671,38.547z M164.141,16.268v5.989h2.206c1.15,0,1.986-0.119,2.514-0.359
                      c0.525-0.239,0.791-0.792,0.791-1.653v-1.963c0-0.864-0.266-1.414-0.791-1.653c-0.528-0.239-1.364-0.36-2.514-0.36H164.141z"/>
                    <path fill="#393A39" d="M184.025,38.547V8.603h15.522c2.876,0,4.929,0.558,6.157,1.676c1.229,1.118,1.845,2.748,1.845,4.888
                      c0,2.142-0.392,3.793-1.173,4.957c-0.783,1.168-1.83,1.928-3.137,2.278v0.289c3.86,0.669,5.795,3.303,5.795,7.905
                      c0,2.397-0.641,4.32-1.915,5.774c-1.279,1.45-3.243,2.178-5.896,2.178H184.025z M196.626,15.167h-3.02v4.455h2.972
                      c1.212,0,1.82-0.741,1.82-2.227C198.398,15.909,197.806,15.167,196.626,15.167z M197.345,26.616h-3.738v4.891h3.689
                      c1.34,0,2.015-0.817,2.015-2.446C199.311,27.429,198.654,26.616,197.345,26.616z"/>
                    <path fill="#CD4829" d="M233.708,16.268h-6.947v22.279h-9.582V16.268h-6.947V8.603h23.477V16.268z"/>
                    <path fill="#CD4829" d="M234.904,23.601c0-5.463,1.021-9.445,3.067-11.956c2.045-2.507,5.734-3.76,11.066-3.76
                      c5.336,0,9.025,1.253,11.07,3.76c2.041,2.511,3.064,6.493,3.064,11.956c0,2.711-0.214,4.999-0.647,6.849
                      c-0.43,1.856-1.173,3.468-2.226,4.839c-1.055,1.375-2.51,2.383-4.361,3.021c-1.852,0.638-4.152,0.957-6.9,0.957
                      c-2.746,0-5.046-0.319-6.897-0.957c-1.854-0.639-3.304-1.646-4.36-3.021c-1.053-1.371-1.797-2.982-2.227-4.839
                      C235.122,28.599,234.904,26.312,234.904,23.601z M245.207,18.617v12.458h3.977c1.31,0,2.259-0.149,2.851-0.458
                      c0.592-0.301,0.888-0.994,0.888-2.081V16.078h-4.024c-1.28,0-2.215,0.152-2.806,0.456
                      C245.501,16.835,245.207,17.533,245.207,18.617z"/>
                    <path fill="#CD4829" d="M290.723,38.547h-10.54l-3.93-8.913h-2.06v8.913h-9.581V8.603h15.09c6.869,0,10.302,3.498,10.302,10.493
                      c0,4.791-1.485,7.955-4.456,9.489L290.723,38.547z M274.193,16.268v5.989h2.204c1.15,0,1.987-0.119,2.516-0.359
                      c0.525-0.239,0.789-0.792,0.789-1.653v-1.963c0-0.864-0.264-1.414-0.789-1.653c-0.528-0.239-1.365-0.36-2.516-0.36H274.193z"/>
                    <path fill="#CD4829" d="M320.187,38.547h-10.54l-3.929-8.913h-2.06v8.913h-9.581V8.603h15.091c6.867,0,10.3,3.498,10.3,10.493
                      c0,4.791-1.482,7.955-4.454,9.489L320.187,38.547z M303.658,16.268v5.989h2.205c1.148,0,1.988-0.119,2.513-0.359
                      c0.528-0.239,0.792-0.792,0.792-1.653v-1.963c0-0.864-0.264-1.414-0.792-1.653c-0.524-0.239-1.364-0.36-2.513-0.36H303.658z"/>
                    <path fill="#CD4829" d="M341.747,27.239h-9.582v3.643h11.741v7.666h-21.322V8.603h21.08l-1.197,7.665h-10.302v4.026h9.582V27.239z"
                      />
                    <path fill="#CD4829" d="M345.82,38.022l1.341-7.908c2.938,0.735,5.58,1.102,7.929,1.102c2.35,0,4.241-0.095,5.679-0.285v-2.395
                      l-4.313-0.381c-3.896-0.355-6.571-1.288-8.023-2.806c-1.454-1.52-2.182-3.762-2.182-6.732c0-4.089,0.888-6.9,2.662-8.433
                      c1.771-1.534,4.78-2.299,9.031-2.299c4.245,0,8.077,0.398,11.494,1.196l-1.195,7.667c-2.97-0.48-5.352-0.72-7.139-0.72
                      c-1.791,0-3.308,0.08-4.553,0.239v2.349l3.45,0.334c4.185,0.417,7.075,1.414,8.673,2.998c1.598,1.58,2.394,3.774,2.394,6.587
                      c0,2.013-0.271,3.714-0.813,5.102s-1.19,2.44-1.941,3.163c-0.749,0.719-1.812,1.271-3.184,1.65
                      c-1.377,0.385-2.582,0.614-3.619,0.693c-1.038,0.084-2.421,0.123-4.143,0.123C353.213,39.267,349.364,38.851,345.82,38.022z"/>
                  </g>
                </svg>
                <!-- end svg logl -->
                <!-- <span>Herb Torres</span> -->
              </div>
            </a>
            </div>
            <paper-tabs selected='{{pageData.page}}' attr-for-selected='key' noink>
              <paper-tab noink link key='projects' on-tap="handleScrollTop"><a href="#/projects">Projects</a></paper-tab>
              <paper-tab noink link key='about' on-tap="handleScrollTop"><a href="#/about">About</a></paper-tab>
              <paper-tab noink link key='contact' on-tap="handleScrollTop"><a href="#/contact">Contact</a></paper-tab>
            </paper-tabs>
            <paper-icon-button icon="menu" id="menu-icon" paper-drawer-toggle>
            </paper-icon-button>
          </paper-toolbar>
        </nav>

        <!-- Portfolio Site Pages -->
        <neon-animated-pages selected="{{pageData.page}}"
                             attr-for-selected="key"
                             entry-animation="fade-in-animation"
                             exit-animation="fade-out-animation">

          <neon-animatable key="projects">
            <portfolio-home on-scroll-top="handleScrollTop"></portfolio-home>
          </neon-animatable>

          <neon-animatable key="about">
            <portfolio-about route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-about>
          </neon-animatable>

          <neon-animatable key="contact">
            <portfolio-contact route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-contact>
          </neon-animatable>

          <!-- Individual Project Pages -->
          <neon-animatable key="rewind">
            <portfolio-page-project-rewind route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-page-project-rewind>
          </neon-animatable>

          <neon-animatable key="nextup">
            <portfolio-page-project-nextup route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-page-project-nextup>
          </neon-animatable>

          <neon-animatable key="artifact-holiday-memory">
            <portfolio-page-project-artifact route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-page-project-artifact>
          </neon-animatable>

          <neon-animatable key="creator-hub">
            <portfolio-page-project-creator route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-page-project-creator>
          </neon-animatable>

          <neon-animatable key="descent-7">
            <portfolio-page-project-descent route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-page-project-descent>
          </neon-animatable>

          <neon-animatable key="terra-bella">
            <portfolio-page-project-terra route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-page-project-terra>
          </neon-animatable>

          <neon-animatable key="kraft-mac-n-cheese">
            <portfolio-page-project-kraft route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-page-project-kraft>
          </neon-animatable>

          <neon-animatable key="stitches">
            <portfolio-page-project-stitches route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-page-project-stitches>
          </neon-animatable>

          <neon-animatable key="holiday-slots">
            <portfolio-page-project-slots route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-page-project-slots>
          </neon-animatable>

          <neon-animatable key="banners">
            <portfolio-page-project-banners route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-page-project-banners>
          </neon-animatable>

          <neon-animatable key="a-touch-of-sweetness">
            <portfolio-page-project-ats route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-page-project-ats>
          </neon-animatable>

          <neon-animatable key="rewind-2016">
            <portfolio-page-project-rewind-16 route="{{pageTail}}" on-scroll-top="handleScrollTop"></portfolio-page-project-rewind-16>
          </neon-animatable>

        </neon-animated-pages>

      </paper-scroll-header-panel>

    </paper-drawer-panel>

  </template>

  <script>
  /**
   * Registers element within Polymer.
   * @constructor
   */
  Polymer({
    /**
     * Specifies HTML tag name for custom Polymer element.
     * @prop
     */
    is: 'portfolio-main',

    properties: {

      route: {
        type: Object,
        notify: true,
        observer: '_routeChanged'
      }

    },
    listeners: {
      'google-youtube-state-change': 'onYouTubeStateChange',
      'stop-current-video': 'stopCurrentVideo'
    },

    onYouTubeStateChange: function(e, detail) {
      var state = detail.data;
      var player = detail.target;
      if (player !== this._player && state === YT.PlayerState.PLAYING) {
        this.stopCurrentVideo();
        this._player = player;
      }
    },

    stopCurrentVideo: function() {
      if (this._player) {
        this._player.stopVideo();
        this._player = null;
      }
    },
    /**
     * Sets route after element is attached to document
     * @function
     */
    attached: function() {
      if (!this.route.path){
        this.set('route.path', '/projects');
      }
    },
    /**
     * Observes route change and closes mobile drawer
     * @function
     * @param {string} newValue
     * @param {string} oldValue
     */
    _routeChanged: function(newValue, oldValue) {

      if(newValue.path === '' || newValue.path === null) {
        this.set('route.path', '/projects');
      }

      if(this.drawerState === 'drawer'){
        this.$.drawer.closeDrawer();
      }

      this.handleScrollTop();
      this.stopCurrentVideo();

    },
    /**
     * Handles smooth scrolling to top of page
     * @function
     */
    handleScrollTop: function(){
      this.$.scroll.scrollToTop(true);
    }

  });

  </script>

</dom-module>
